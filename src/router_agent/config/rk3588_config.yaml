# RK3588 Production Deployment Configuration
# Optimized for Rockchip RK3588 with RKNPU acceleration

# System settings optimized for RK3588
system:
  deployment_target: "rk3588"
  log_level: "WARN"  # Reduce logging for performance
  enable_debug_mode: false

# Router Agent optimized for ARM/RKNPU
router_agent:
  mode: "hybrid"
  startup_timeout_seconds: 180.0  # Longer startup on embedded
  response_timeout_seconds: 15.0  # Account for slower processing

# Audio optimized for RK3588 RKNPU
audio:
  sample_rate: 16000
  chunk_duration_ms: 200  # Larger chunks for efficiency
  
  vad:
    threshold: 0.4  # Slightly lower for better sensitivity
    
  asr:
    model_path: "/opt/models/sherpa-onnx-rknpu"
    use_rknpu: true
    max_active_paths: 2  # Reduce for memory constraints
    
  tts:
    primary_engine: "pyttsx3"  # Local engine for reliability
    rate: 100  # Slower for processing constraints

# Elderly optimizations for embedded deployment
elderly:
  speech_rate_multiplier: 0.7  # Even slower on embedded
  pause_between_sentences: 1.0  # Longer pauses
  volume_boost: 1.3  # Higher volume for outdoor use

# Safety settings for production
safety:
  emergency_response_time_ms: 150  # Slightly relaxed for embedded
  enhanced_guard:
    enable_wakeword_detection: true
    enable_sos_detection: true
    enable_geofence_monitoring: true
    enable_implicit_commands: false  # Disable for performance
    
  emergency:
    call_timeout_seconds: 60  # Longer timeout for slower networks
    escalation_delay_seconds: 120

# FastAPI services for RK3588
fastapi:
  # Use local URLs for embedded deployment
  orchestrator_url: "http://127.0.0.1:7010"
  guard_url: "http://127.0.0.1:7002"
  intent_url: "http://127.0.0.1:7001"
  adapters_url: "http://127.0.0.1:7003"
  
  enable_auto_start: true
  startup_wait_seconds: 45
  timeout_seconds: 15.0  # Longer timeout for embedded
  
  docker_compose_rk3588: "../router_agent/docker/docker-compose.rk3588.yml"

# Communication optimized for embedded
communication:
  sip:
    transport: "UDP"  # More efficient than TCP
    registration_timeout: 600  # Longer for unreliable networks
    
  sms:
    provider: "twilio"
    max_message_length: 1600
    
# Smart home optimized for RK3588
smart_home:
  homeassistant:
    timeout: 15  # Longer timeout
    
  mqtt:
    keepalive: 120  # Longer keepalive for embedded
    
  discovery:
    scan_interval: 600  # Less frequent scanning

# Video optimized for RK3588
video:
  webrtc:
    server_host: "0.0.0.0"
    server_port: 8080
    
  cameras:
    max_fps: 20  # Reduce FPS for performance
    default_resolution: "1280x720"
    
  quality:
    default_quality: "medium"
    max_bitrate_kbps: 1500  # Reduce bitrate for embedded

# Performance settings for RK3588
performance:
  max_concurrent_commands: 3  # Reduce concurrency
  command_timeout: 20
  retry_attempts: 2
  cache_frequent_phrases: true
  max_cache_size: 50  # Smaller cache for memory

# Monitoring optimized for embedded
monitoring:
  health_check_interval: 60  # Less frequent health checks
  enable_performance_tracking: false  # Disable for performance
  
# Logging optimized for embedded storage
logging:
  log_directory: "/var/log/elderly_companion"
  max_log_size_mb: 50  # Smaller logs
  retention_days: 7    # Shorter retention

# Resource limits for RK3588
resources:
  max_memory_mb: 2048
  max_cpu_percent: 80
  enable_resource_monitoring: true
  enable_thermal_monitoring: true