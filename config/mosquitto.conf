# Elderly Companion Robdog - MQTT Broker Configuration
# Eclipse Mosquitto Configuration for IoT device communication

# Basic Configuration
pid_file /var/run/mosquitto.pid
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Network Configuration
listener 1883
protocol mqtt

# WebSocket Support for Web Clients
listener 9001
protocol websockets

# Security Configuration (Development)
allow_anonymous true
# Note: In production, configure proper authentication:
# password_file /mosquitto/config/passwd
# acl_file /mosquitto/config/acl

# Connection Limits
max_connections 1000
max_keepalive 65535

# Message Size Limits (for video/audio metadata)
message_size_limit 10485760  # 10MB

# Logging
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# Health Check Topic
sys_interval 10

# QoS and Persistence
queue_qos0_messages true
retain_available true
max_queued_messages 1000